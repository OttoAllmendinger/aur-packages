# Maintainer: Frikilinux <frikilinux at frikilinux.com.ar> 

pkgname=minitube-git
pkgver=20100830
pkgrel=1
pkgdesc="Native YouTube client in Qt"
url="http://flavio.tordini.org/minitube"
license="GPL"
arch=('i686' 'x86_64')
depends=('qt' 'phonon')
makedepends=('git')
optdepends=('phonon-xine: for xine backend'
            'phonon-gstreamer: for gstreamer backend'
            'gstreamer0.10-plugins: to get all videos to play with phonon-gstreamer'
            'phonon-mplayer-git: for mplayer backend (from AUR)'
            'phonon-vlc-git: for vlc backend (from AUR)')
conflicts=('minitube')
install=minitube.install

_gitroot='git://gitorious.org/minitube/minitube.git'
_gitname='minitube'

build() {
    cd $srcdir
  
      msg "Connecting to GIT server...."
  if [ -d ${srcdir}/$_gitname ] ; then
      cd $_gitname && git pull origin
      msg "The local files are updated."
  else
      git clone $_gitroot
  fi
      msg "GIT checkout done or server timeout"
      
      msg "Starting make..."
  
  if [ -d ${srcdir}/${_gitname}-build ]; then
      rm -rf ${srcdir}/${_gitname}-build
  fi
    cp -r ${srcdir}/$_gitname ${srcdir}/${_gitname}-build
    cd ${srcdir}/${_gitname}-build

    qmake PREFIX=/usr || return 1
    make INSTALL_ROOT="$pkgdir" install || return 1
        
}

